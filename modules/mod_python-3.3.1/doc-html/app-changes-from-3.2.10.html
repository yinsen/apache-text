<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<link rel="STYLESHEET" href="modpython.css" type='text/css' />
<link rel="first" href="modpython.html" title='Mod_python Manual' />
<link rel='contents' href='contents.html' title="Contents" />
<link rel='index' href='genindex.html' title='Index' />
<link rel='last' href='about.html' title='About this document...' />
<link rel='help' href='about.html' title='About this document...' />
<link rel="next" href="app-changes.html" />
<link rel="prev" href="security.html" />
<link rel="parent" href="modpython.html" />
<link rel="next" href="app-changes.html" />
<meta name='aesop' content='information' />
<title>A. Changes from Version (3.2.10)</title>
</head>
<body>
<DIV CLASS="navigation">
<div id='top-navigation-panel' xml:id='top-navigation-panel'>
<table align="center" width="100%" cellpadding="0" cellspacing="2">
<tr>
<td class='online-navigation'><a rel="prev" title="8. Security"
  href="security.html"><img src='previous.png'
  border='0' height='32'  alt='Previous Page' width='32' /></A></td>
<td class='online-navigation'><a rel="parent" title="Mod_python Manual"
  href="modpython.html"><img src='up.png'
  border='0' height='32'  alt='Up One Level' width='32' /></A></td>
<td class='online-navigation'><a rel="next" title="B. Changes from Version"
  href="app-changes.html"><img src='next.png'
  border='0' height='32'  alt='Next Page' width='32' /></A></td>
<td align="center" width="100%">Mod_python Manual</td>
<td class='online-navigation'><a rel="contents" title="Table of Contents"
  href="contents.html"><img src='contents.png'
  border='0' height='32'  alt='Contents' width='32' /></A></td>
<td class='online-navigation'><img src='blank.png'
  border='0' height='32'  alt='' width='32' /></td>
<td class='online-navigation'><a rel="index" title="Index"
  href="genindex.html"><img src='index.png'
  border='0' height='32'  alt='Index' width='32' /></A></td>
</tr></table>
<div class='online-navigation'>
<b class="navlabel">Previous:</b>
<a class="sectref" rel="prev" href="security.html">8. Security</A>
<b class="navlabel">Up:</b>
<a class="sectref" rel="parent" href="modpython.html">Mod_python Manual</A>
<b class="navlabel">Next:</b>
<a class="sectref" rel="next" href="app-changes.html">B. Changes from Version</A>
</div>
<hr /></div>
</DIV>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION0011000000000000000000"></A><A NAME="app-changes-from-3.2.10"></A>
<BR>
A. Changes from Version (3.2.10)
</H1>

<P>
<a id='l2h-297' xml:id='l2h-297'></a>
<P>
New Features

<P>

<UL>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-103"
 title="MODPYTHON-103"
 >MODPYTHON-103</a></em>)
      New <code>req.add_output_filter()</code>, <code>req.add_input_filter()</code>,
      <code>req.register_output_fiter()</code>, <code>req.register_input_filter()</code>
      methods. These allows the dynamic registration of filters and the
      attaching of filters to the current request.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-104"
 title="MODPYTHON-104"
 >MODPYTHON-104</a></em>)
      Support added for using Python in content being passed through "INCLUDES"
      output filter, or as more commonly referred to server side include (SSI)
      mechanism.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-108"
 title="MODPYTHON-108"
 >MODPYTHON-108</a></em>)
      Added support to cookies for <code>httponly</code> attribute, an extension
      originally created by Microsoft, but now getting more widespread use
      in the battle against cross site-scripting attacks.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-118"
 title="MODPYTHON-118"
 >MODPYTHON-118</a></em>)
      Now possible using the <code>PythonImport</code> directive to specify the name
      of a function contained in the module to be called once the designated
      module has been imported.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-124"
 title="MODPYTHON-124"
 >MODPYTHON-124</a></em>)
      New <code>req.auth_name()</code> and <code>req.auth_type()</code> methods.
      These return the values associated with the AuthName and AuthType
      directives respectively. The <code>req.ap_auth_type</code> has now also
      been made writable so that it can be set by an authentication
      handler.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-130"
 title="MODPYTHON-130"
 >MODPYTHON-130</a></em>)
      Added <code>req.set_etag()</code>, <code>req.set_last_modified()</code> and
      <code>req.update_mtime()</code> functions as wrappers for similar functions
      provided by Apache C API. These are required to effectively use the
      <code>req.meets_condition()</code> function. The documentation for
      <code>req.meets_condition()</code> has also been updated as what it
      previously described probably wouldn't actually work.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-132"
 title="MODPYTHON-132"
 >MODPYTHON-132</a></em>)
      New <code>req.construct_url()</code> method. Used to construct a fully
      qualified URI string incorporating correct scheme, server and port.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-144"
 title="MODPYTHON-144"
 >MODPYTHON-144</a></em>)
      The "<tt class="samp">apache.interpreter</tt>" and "<tt class="samp">apache.main_server</tt>" attributes
      have been made publically available. These were previously private and
      not part of the public API.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-149"
 title="MODPYTHON-149"
 >MODPYTHON-149</a></em>)
      Added support for session objects that span domains.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-153"
 title="MODPYTHON-153"
 >MODPYTHON-153</a></em>)
      Added <code>req.discard_request_body()</code> function as wrapper for
      similar function provided by Apache C API. The function tests for
      and reads any message body in the request, simply discarding
      whatever it receives.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-164"
 title="MODPYTHON-164"
 >MODPYTHON-164</a></em>)
      The <code>req.add_handler()</code>, <code>req.register_input_filter()</code> and
      <code>req.register_output_filter()</code> methods can now take a direct
      reference to a callable object as well a string which refers to a
      module or module::function combination by name.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-165"
 title="MODPYTHON-165"
 >MODPYTHON-165</a></em>)
      Exported functions from mod_python module to be used in other third
      party modules for Apache. The purpose of these functions is to allow
      those other modules to access the mechanics of how mod_python creates
      interpreters, thereby allowing other modules to also embed Python
      and for there not to be a conflict with mod_python.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-170"
 title="MODPYTHON-170"
 >MODPYTHON-170</a></em>)
      Added <code>req._request_rec</code>, <code>server._server_rec</code> and
      <code>conn._conn_rec</code> semi private members for getting accessing to
      underlying Apache struct as a Python CObject. These can be used for
      use in implementing SWIG bindings for lower level APIs of Apache.
      These members should be regarded as experimental and there are no
      guarantees that they will remain present in this specific form in the
      future.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-193"
 title="MODPYTHON-193"
 >MODPYTHON-193</a></em>)
      Added new attribute available as <code>req.hlist.location</code>. For a
      handler executed directly as the result of a handler directive
      within a <code>Location</code> directive, this will be set to the value
      of the <code>Location</code> directive. If <code>LocationMatch</code>, or
      wildcards or regular expressions are used with <code>Location</code>,
      the value will be the matched value in the URL and not the pattern.
  
</LI>
</UL>

<P>
Improvements

<P>

<UL>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-27"
 title="MODPYTHON-27"
 >MODPYTHON-27</a></em>)
      When using mod_python.publisher, the <code>__auth__()</code> and
      <code>__access__()</code> functions and the <code>__auth_realm__</code> string
      can now be nested within a class method as a well a normal function.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-90"
 title="MODPYTHON-90"
 >MODPYTHON-90</a></em>)
      The <code>PythonEnablePdb</code> configuration option will now be ignored
      if Apache hasn't been started up in single process mode.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-91"
 title="MODPYTHON-91"
 >MODPYTHON-91</a></em>)
      If running Apache in single process mode with PDB enabled and the
      "quit" command is used to exit that debug session, an exception
      indicating that the PDB session has been aborted is raised rather
      than <code>None</code> being returned with a subsequent error complaining
      about the handler returning an invalid value.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-93"
 title="MODPYTHON-93"
 >MODPYTHON-93</a></em>)
      Improved <code>util.FieldStorage</code> efficiency and made the interface
      more dictionary like.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-101"
 title="MODPYTHON-101"
 >MODPYTHON-101</a></em>)
      Force an exception when handler evaluates to something other than
      <code>None</code> but is otherwise not callable. Previously an exception
      would not be generated if the handler evaluated to <code>False</code>.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-107"
 title="MODPYTHON-107"
 >MODPYTHON-107</a></em>)
      Neither mod_python.publisher nor mod_python.psp explicitly flush
      output after writing the content of the response back to the request
      object. By not flushing output it is now possible to use the
      "CONTENT_LENGTH" output filter to add a "Content-Length" header.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-111"
 title="MODPYTHON-111"
 >MODPYTHON-111</a></em>)
      Note made in session documentation that a save is required to avoid
      session timeouts.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-125"
 title="MODPYTHON-125"
 >MODPYTHON-125</a></em>)
      The <code>req.handler</code> attribute is now writable. This allows a handler
      executing in a phase prior to the response phase to specify which
      Apache module will be responsible for generating the content.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-128"
 title="MODPYTHON-128"
 >MODPYTHON-128</a></em>)
      Made the <code>req.canonical_filename</code> attribute writable. Changed
      the <code>req.finfo</code> attribute from being a tuple to an actual object.
      For backwards compatibility the attributes of the object can still be
      accessed as if they were a tuple. New code however should access
      the attributes as member data. The <code>req.finfo</code> attribute is
      also now writable and can be assigned to using the result of calling
      the new function <code>apache.stat()</code>. This function is a wrapper
      for <code>apr_stat()</code>.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-129"
 title="MODPYTHON-129"
 >MODPYTHON-129</a></em>)
      When specifying multiple handlers for a phase, the status returned by
      each handler is now treated the same as how Apache would treat the
      status if the handler was registered using the low level C API. What
      this means is that whereas stacked handlers of any phase would in
      turn previously be executed as long as they returned <code>apache.OK</code>,
      this is no longer the case and what happens is dependent on the
      phase. Specifically, a handler returning <code>apache.DECLINED</code> no
      longer causes the execution of subsequent handlers for the phase to
      be skipped. Instead, it will move to the next of the stacked
      handlers. In the case of <code>PythonTransHandler</code>,
      <code>PythonAuthenHandler</code>, <code>PythonAuthzHandler</code> and
      <code>PythonTypeHandler</code>, as soon as <code>apache.OK</code> is returned,
      subsequent handlers for the phase will be skipped, as the result
      indicates that any processing pertinent to that phase has been
      completed. For other phases, stacked handlers will continue to be
      executed if <code>apache.OK</code> is returned as well as when
      <code>apache.DECLINED</code> is returned. This new interpretation of the
      status returned also applies to stacked content handlers listed
      against the <code>PythonHandler</code> directive even though Apache
      notionally only ever calls at most one content handler. Where all
      stacked content handlers in that phase run, the status returned from
      the last handler becomes the overall status from the content phase.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-141"
 title="MODPYTHON-141"
 >MODPYTHON-141</a></em>)
      The <code>req.proxyreq</code> and <code>req.uri</code> attributes are now writable.
      This allows a handler to setup these values and trigger proxying of the
      current request to a remote server.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-142"
 title="MODPYTHON-142"
 >MODPYTHON-142</a></em>)
      The <code>req.no_cache</code> and <code>req.no_local_copy</code> attributes are
      now writable.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-143"
 title="MODPYTHON-143"
 >MODPYTHON-143</a></em>)
      Completely reimplemented the module importer. This is now used
      whenever modules are imported corresponding to any of the
      <code>Python*Handler</code>, <code>Python*Filter</code> and <code>PythonImport</code>
      directives. The module importer is still able to be used directly
      using the <code>apache.import_module()</code> function. The new module
      importer no longer supports automatic reloading of packages/modules
      that appear on the standard Python module search path as defined by
      the <code>PythonPath</code> directive or within an application by direct
      changes to <code>sys.path</code>. Automatic module reloading is however
      still performed on file based modules (not packages) which are
      located within the document tree where handlers are located.
      Locations within the document tree are however no longer added to the
      standard Python module search path automatically as they are
      maintained within a distinct importer search path. The
      <code>PythonPath</code> directive MUST not be used to point at directories
      within the document tree. To have additional directories be searched
      by the module importer, they should be listed in the
      <code>mod_python.importer.path</code> option using the <code>PythonOption</code>
      directive. This is a path similar to how <code>PythonPath</code> argument
      is supplied, but MUST not reference <code>sys.path</code> nor contain any
      directories also listed in the standard Python module search path.
      If an application does not appear to work under the module importer,
      the old module importer can be reenabled by setting the
      <code>mod_python.legacy.importer</code> option using the <code>PythonOption</code>
      directive to the value '<code>*</code>'. This option must be set in the
      global Apache configuration.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-152"
 title="MODPYTHON-152"
 >MODPYTHON-152</a></em>)
      When in a sub request, when a request is the result of an internal
      redirect, or when when returning from such a request, the
      <code>req.main</code>, <code>req.prev</code> and <code>req.next</code> members now
      correctly return a reference to the original Python request object
      wrapper first created for the specific <code>request_rec</code> instance
      rather than creating a new distinct Python request object. This means
      that any data added explicitly to a request object can be passed
      between such requests.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-178"
 title="MODPYTHON-178"
 >MODPYTHON-178</a></em>)
      When using mod_python.psp, if the PSP file which is the target of the
      request doesn't actually exist, an <code>apache.HTTP_NOT_FOUND</code> server
      error is now returned to the client rather than raising a
      <code>ValueError</code> exception which results in a 500 internal server error.
      Note that if using <code>SetHandler</code> and the request is against the
      directory and no <code>DirectoryIndex</code> directive is specified which
      lists a valid PSP index file, then the same <code>apache.HTTP_NOT_FOUND</code>
      server error is returned to the client.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-196"
 title="MODPYTHON-196"
 >MODPYTHON-196</a></em>)
      For completeness, added <code>req.server.log_error()</code> and
      <code>req.connection.log_error()</code>. The latter wraps
      <code>ap_log_cerror()</code> (when available), allowing client information
      to be logged along with message from a connection handler.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-206"
 title="MODPYTHON-206"
 >MODPYTHON-206</a></em>)
      The attribute <code>req.used_path_info</code> is now modifiable and can
      be set from within handlers. This is equivalent to having used the
      <code>AcceptPathInfo</code> directive.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-207"
 title="MODPYTHON-207"
 >MODPYTHON-207</a></em>)
      The attribute <code>req.args</code> is now modifiable and can be set from
      within handlers.
  
</LI>
</UL>

<P>
Bug Fixes

<P>

<UL>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-38"
 title="MODPYTHON-38"
 >MODPYTHON-38</a></em>)
      Fixed issue when using PSP pages in conjunction with publisher handler
      or where a PSP error page was being triggered, that form parameters
      coming from content of a POST request weren't available or only available
      using a workaround. Specifically, the PSP page will now use any
      <code>FieldStorage</code> object instance cached as <code>req.form</code> left
      there by preceding code.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-43"
 title="MODPYTHON-43"
 >MODPYTHON-43</a></em>)
      Nested <code>__auth__()</code> functions in mod_python.publisher now execute
      in context of globals from the file the function is in and not that
      of mod_python.publisher itself.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-47"
 title="MODPYTHON-47"
 >MODPYTHON-47</a></em>)
      Fixed mod_python.publisher so it will not return a HTTP Bad Request
      response when mod_auth is being used to provide Digest authentication.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-63"
 title="MODPYTHON-63"
 >MODPYTHON-63</a></em>)
      When handler directives are used within <code>Directory</code> or
      <code>DirectoryMatch</code> directives where wildcards or regular
      expressions are used, the handler directory will be set to the
      shortest directory matched by the directory pattern. Handler
      directives can now also be used within <code>Files</code> and
      <code>FilesMatch</code> directives and the handler directory will correctly
      resolve to the directory corresponding to the enclosing
      <code>Directory</code> or <code>DirectoryMatch</code> directive, or the directory
      the <code>.htaccess</code> file is contained in.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-76"
 title="MODPYTHON-76"
 >MODPYTHON-76</a></em>)
      The <code>FilterDispatch</code> callback should not flush the filter if it
      has already been closed.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-84"
 title="MODPYTHON-84"
 >MODPYTHON-84</a></em>)
      The original change to fix the symlink issue for <code>req.sendfile()</code>
      was causing problems on Win32, plus code needed to be changed to work
      with APR 1.2.7.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-100"
 title="MODPYTHON-100"
 >MODPYTHON-100</a></em>)
      When using stacked handlers and a <code>SERVER_RETURN</code> exception was
      used to return an <code>OK</code> status for that handler, any following
      handlers weren't being run if appropriate for the phase.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-109"
 title="MODPYTHON-109"
 >MODPYTHON-109</a></em>)
      The <code>Py_Finalize()</code> function was being called on child process
      shutdown. This was being done though from within the context of a
      signal handler, which is generally unsafe and would cause the process
      to lock up. This function is no longer called on child process shutdown.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-112"
 title="MODPYTHON-112"
 >MODPYTHON-112</a></em>)
      The <code>req.phase</code> attribute is no longer overwritten by an input
      or output filter. The <code>filter.is_input</code> member should be used
      to determine if a filter is an input or output filter.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-113"
 title="MODPYTHON-113"
 >MODPYTHON-113</a></em>)
      The <code>PythonImport</code> directive now uses the
      <code>apache.import_module()</code> function to import modules to avoid
      reloading problems when same module is imported from a handler.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-114"
 title="MODPYTHON-114"
 >MODPYTHON-114</a></em>)
      Fixed race conditions on setting <code>sys.path</code> when the
      <code>PythonPath</code> directive is being used as well as problems with
      infinite extension of path.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-120"
 title="MODPYTHON-120"
 >MODPYTHON-120</a></em>)
      (<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-121"
 title="MODPYTHON-121"
 >MODPYTHON-121</a></em>)
      Fixes to test suite so it will work on virtual hosting environments
      where <code>localhost</code> doesn't resolve to <code>127.0.0.1</code> but the
      actual IP address of the host.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-126"
 title="MODPYTHON-126"
 >MODPYTHON-126</a></em>)
      When <code>Python*Handler</code> or <code>Python*Filter</code> directive is used
      inside of a <code>Files</code> directive container, the handler/filter
      directory value will now correctly resolve to the directory corresponding
      to any parent <code>Directory</code> directive or the location of the
      <code>.htaccess</code> file the <code>Files</code> directive is contained in.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-133"
 title="MODPYTHON-133"
 >MODPYTHON-133</a></em>)
      The table object returned by <code>req.server.get_config()</code> was not
      being populated correctly to be the state of directives set at global
      scope for the server.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-134"
 title="MODPYTHON-134"
 >MODPYTHON-134</a></em>)
      Setting <code>PythonDebug</code> to <code>Off</code>, wasn't overriding <code>On</code>
      setting in parent scope.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-140"
 title="MODPYTHON-140"
 >MODPYTHON-140</a></em>)
      The <code>util.redirect()</code> function should be returning server status of
      <code>apache.DONE</code> and not <code>apache.OK</code> otherwise it will not give
      desired result if used in non content handler phase or where there are
      stacked content handlers.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-147"
 title="MODPYTHON-147"
 >MODPYTHON-147</a></em>)
      Stopped directories being added to <code>sys.path</code> multiple times when
      <code>PythonImport</code> and <code>PythonPath</code> directive used.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-148"
 title="MODPYTHON-148"
 >MODPYTHON-148</a></em>)
      Added missing Apache contants <code>apache.PROXYREQ_RESPONSE</code> and
      <code>apache.HTTP_UPGRADE_REQUIRED</code>. Also added new constants for
      Apache magic mime types and values for interpreting the
      <code>req.connection.keepalive</code> and <code>req.read_body</code> members.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-150"
 title="MODPYTHON-150"
 >MODPYTHON-150</a></em>)
      In a multithread MPM, the <code>apache.init()</code> function could be called
      more than once for a specific interpreter instance whereas it should
      only be called once.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-151"
 title="MODPYTHON-151"
 >MODPYTHON-151</a></em>)
      Debug error page returned to client when an exception in a handler
      occurred wasn't escaping special HTML characters in the traceback or
      the details of the exception.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-157"
 title="MODPYTHON-157"
 >MODPYTHON-157</a></em>)
      Wrong interpreter name used for fixup handler phase and earlier, when
      <code>PythonInterpPerDirectory</code> was enabled and request was against
      a directory but client didn't provide the trailing slash.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-159"
 title="MODPYTHON-159"
 >MODPYTHON-159</a></em>)
      Fix <code>FieldStorage</code> class so that it can handle multiline headers.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-160"
 title="MODPYTHON-160"
 >MODPYTHON-160</a></em>)
      Using <code>PythonInterpPerDirective</code> when setting content handler to
      run dynamically with <code>req.add_handler()</code> would cause Apache to
      crash.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-161"
 title="MODPYTHON-161"
 >MODPYTHON-161</a></em>)
      Directory argument supplied to <code>req.add_handler()</code> is
      canonicalized and a trailing slash added automatically. This is
      needed to ensure that the directory is always in POSIX path style as
      used by Apache and that convention where directories associated with
      directives always have trailing slash is adhered to. If this is not
      done, a different interpreter can be chosen to that expected when the
      <code>PythonInterpPerDirective</code> is used.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-166"
 title="MODPYTHON-166"
 >MODPYTHON-166</a></em>)
      <code>PythonHandlerModule</code> was not setting up registration of the
      <code>PythonFixupHandler</code> or <code>PythonAuthenHandler</code>. For the
      latter this meant that using <code>Require</code> directive with
      <code>PythonHandlerModule</code> would cause a 500 error and complaint in
      error log about "No groups file".
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-167"
 title="MODPYTHON-167"
 >MODPYTHON-167</a></em>)
      When <code>PythonDebug</code> was <code>On</code> and and exception occurred, the
      response to the client had a status of <code>200</code> when it really should
      have been a <code>500</code> error status indicating that an internal error
      occurred. A <code>500</code> error status was correctly being returned when
      <code>PythonDebug</code> was <code>Off</code>.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-168"
 title="MODPYTHON-168"
 >MODPYTHON-168</a></em>)
      Fixed psp_parser error when CR is used as a line terminator in psp code.
      This may occur with some older editors such as GoLive on Mac OS X.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-175"
 title="MODPYTHON-175"
 >MODPYTHON-175</a></em>)
      Fixed problem whereby a main PSP page and an error page triggered from
      that page both accessing the session object would cause a deadlock.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-176"
 title="MODPYTHON-176"
 >MODPYTHON-176</a></em>)
      Fixed issue whereby PSP code would unlock session object which it had
      inherited from the caller meaning caller could no longer use it safely.
      PSP code will now only unlock session if it created it in the first
      place.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-179"
 title="MODPYTHON-179"
 >MODPYTHON-179</a></em>)
      Fixed the behaviour of req.readlines() when a size hint was provided. Previously,
      it would always return a single line when a size hint was provided.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-180"
 title="MODPYTHON-180"
 >MODPYTHON-180</a></em>)
      Publisher would wrongly output a warning about nothing to publish if
      <code>req.write()</code> or <code>req.sendfile()</code> used and data not flushed,
      and then published function returned <code>None</code>.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-181"
 title="MODPYTHON-181"
 >MODPYTHON-181</a></em>)
      Fixed memory leak when mod_python handlers are defined for more than
      one phase at the same time.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-182"
 title="MODPYTHON-182"
 >MODPYTHON-182</a></em>)
      Fixed memory leak in req.readline().
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-184"
 title="MODPYTHON-184"
 >MODPYTHON-184</a></em>)
      Fix memory leak in <code>apache.make_table()</code>. This was used by
      <code>util.FieldStorage</code> class so affected all code using forms.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-185"
 title="MODPYTHON-185"
 >MODPYTHON-185</a></em>)
      Fixed segfault in psp.parsestring(src_string) when src_string is empty.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-187"
 title="MODPYTHON-187"
 >MODPYTHON-187</a></em>)
      Table objects could crash in various ways when the value of an item
      was NULL. This could occur for <code>SCRIPT_FILENAME</code> when the
      <code>req.subprocess_env</code> table was accessed in the post read request
      handler phase.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-189"
 title="MODPYTHON-189"
 >MODPYTHON-189</a></em>)
      Fixed representation returned by calling <code>repr()</code> on a table object.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-191"
 title="MODPYTHON-191"
 >MODPYTHON-191</a></em>)
      Session class will no longer accept a normal cookie if a signed cookie
      was expected.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-194"
 title="MODPYTHON-194"
 >MODPYTHON-194</a></em>)
      Fixed potential memory leak due to not clearing the state of thread state
      objects before deleting them.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-195"
 title="MODPYTHON-195"
 >MODPYTHON-195</a></em>)
      Fix potential Win32 resource leaks in parent Apache process when process
      restarts occur.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-198"
 title="MODPYTHON-198"
 >MODPYTHON-198</a></em>)
      Python 2.5 broke nested __auth__/__access__/__auth_realm__ in
      mod_python.publisher.
</LI>
<LI>(<em class="citetitle"><a
 href="http://issues.apache.org/jira/browse/MODPYTHON-200"
 title="MODPYTHON-200"
 >MODPYTHON-200</a></em>)
      Fixed problem whereby signed and marshalled cookies could not be used
      at the same time. When expecting marshalled cookie, any signed, but
      not marshalled cookies will be returned as normal cookies.
  
</LI>
</UL>

<P>

<DIV CLASS="navigation">
<div class='online-navigation'>
<p></p><hr />
<table align="center" width="100%" cellpadding="0" cellspacing="2">
<tr>
<td class='online-navigation'><a rel="prev" title="8. Security"
  href="security.html"><img src='previous.png'
  border='0' height='32'  alt='Previous Page' width='32' /></A></td>
<td class='online-navigation'><a rel="parent" title="Mod_python Manual"
  href="modpython.html"><img src='up.png'
  border='0' height='32'  alt='Up One Level' width='32' /></A></td>
<td class='online-navigation'><a rel="next" title="B. Changes from Version"
  href="app-changes.html"><img src='next.png'
  border='0' height='32'  alt='Next Page' width='32' /></A></td>
<td align="center" width="100%">Mod_python Manual</td>
<td class='online-navigation'><a rel="contents" title="Table of Contents"
  href="contents.html"><img src='contents.png'
  border='0' height='32'  alt='Contents' width='32' /></A></td>
<td class='online-navigation'><img src='blank.png'
  border='0' height='32'  alt='' width='32' /></td>
<td class='online-navigation'><a rel="index" title="Index"
  href="genindex.html"><img src='index.png'
  border='0' height='32'  alt='Index' width='32' /></A></td>
</tr></table>
<div class='online-navigation'>
<b class="navlabel">Previous:</b>
<a class="sectref" rel="prev" href="security.html">8. Security</A>
<b class="navlabel">Up:</b>
<a class="sectref" rel="parent" href="modpython.html">Mod_python Manual</A>
<b class="navlabel">Next:</b>
<a class="sectref" rel="next" href="app-changes.html">B. Changes from Version</A>
</div>
</div>
<hr />
<span class="release-info">Release 3.3.1, documentation updated on January 29, 2007.</span>
</DIV>
<!--End of Navigation Panel-->

</BODY>
</HTML>
